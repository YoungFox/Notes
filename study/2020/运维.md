##1、初级

熟练使用Linux

https://juejin.im/entry/5a2f7fdb5188252754104912



magedu.com/74163.html?Linux_wenzhang_zhihu_jinke_39geLinuxxitongjichumiansiti_32250942

影响性能的一般都是网卡、硬盘


Linux设计哲学

1. 一切皆文件
2. 小型、单一用途的程序
3. 链接程序，共同完成复杂的任务
4. 避免令人困惑的用户界面
5. 配置数据存储在文本中


/etc: 配置文件
/dev: device



Linux基本操作

```
lscpu

#内存
free -h

#硬盘
lsblk 

#网卡
ip a

#操作系统版本
cat /etc/os-release

#IP
hostname -I
```


1. 内部命令
2. 外部命令
优先用内部命令，顺序可以修改

```
type COMMAND
type -a COMMAND
```

选项：
段选项
长选项
BSD


```
id -u
```


```
#系统时间
date

#日历
cal
```


```
whoami
who
w
```


```
#远程协助，偶尔用到
screen -S help
screen -x help
exit
```


```
#提示音
sleep 4;echo -e "\a"
```


```
touch `date +%F`.log
```


影响所有用户

/etc/profile  


影响当前用户

~/.bash_profile


##获得帮助

```
#查看命令在man手册第几章
whatis xxx

mandb


#内部命令
help command

#外部命令
--help
-h

man
```

man的九个章节

1. 用户命令
2. 系统调用
3. C库调用
4. 设备文件及特殊文件
5. 配置文件格式
6. 游戏
7. 杂项
8. 管理类的命令
9. Linux内核API


/usr/share/doc


Ctrl + s //阻止屏幕输出
Ctrl + q //阻止屏幕输出
alt + r //删除整行

##文件管理
单根架构

/bin: 二进制工具，可执行

/sbin: 

/boot: 启动文件

/dev: 设备

/etc: 配置

/home: 用户目录

/run: 正在运行的信息

/tmp: 临时文件

/usr: 

/var: 变化的数据，日志

/root: 管理员家目录

/proc: 内存文件

/sys: 内存文件，关注硬件



###应用程序的组成部分

二进制程序: /bin,/sbin,/usr/bin,/usr/sbin,/usr/local/bin,/usr/local/sbin

库文件: /lib,/lib64,/usr/lib64,/us/local/lib,/usr/local/lib64

配置文件: /etc,/etc/DIECTORY,/usr/local/lib64

帮助文件: /usr/share/man,/usr/share/doc,/usr/local/share/man,/usr/local/share/doc

###文件类型

-：普通文件

d：目录文件

b：块设备

c：字符设备

l：符号链接文件

p：管道文件pipe

s：套接字文件socket


###文件操作命令

basename: 基名

dirname: 目录名

stat:查看元数据

file:文件类型


###通配符

*

[:lower:] : a-z


###复制文件和目录




###用户、组和权限

linux安全模型
1. 认证
2. 授权
3. 审计


/etc/passwd

/etc/shadow

用户组：方便授权

```
useradd
usermod
userdel
```

```
groupadd
groupmod
groupdel
```


```
su
```

####设置密码
passwd 


###文件权限管理

chown -R 递归更改文件属性很危险

chgrp

r:读

w:写

x:执行

rm删除文件，与文件的权限没关系，和文件所在的文件夹权限有关系


```
rwx rw- r-- file
111 110 100
7	 6   4

764
```


umask

新建文件的默认全权限：666-umask,如果某位结果是奇数则+1，偶数不变

新建目录的默认权限： 777-umask

.bashrc


####特殊属性
chattr,lsattr:


####ACL相关命令

```
#
setfacl
```

ACL生效顺序：
所有者，自定义用户，所属组|自定义组，其他人


####文件查找和压缩
```
locate

#实时搜索
find
find -name a.txt

```


rename 批量修改名字

硬链接ln：本质是同一个文件，不允许文件夹

ln -s：相对路径是相对于目标文件夹

```
#绝对路径
ln -s /data/dir /data/dirlink
#相对路径
ln -s ../data/dir /root/dilink

rm -rf /data/dirlink  #删除软连接本身，不会删除源目录内容
rm -rf /data/dirlink/ #删除源目录文件，不会删除链接文件
```

<!--清空文件-->
cat /dev/null > xxx

1>  > 标准输出重定向
2> 标准错误重定向



```
pwd > log
```

<!--标准输入重定向-->
```
echo 2^3 > bc.log
bc < bc.log
```

```
tr 'a-z' 'A-Z'
```



###管道


-：提取前一个命令的stdout


###网路协议和管理

网络故障排查：

1.	ping


/etc/sysconfig/network-scripts/ifcfg-<name>


<!--网卡信息等-->
ethtool


###

数据链路层：运行以太网等协议

```
cat /etc/services
```

ping走的是ICMP协议

ARP欺骗

ARP用来找mac地址

路由-ARP-握手-通信

IPV4是32位

IP地址是逻辑上的，除了唯一性。还具有管理性


###子网掩码
网络ID = IP与netmask

如何判断是否在同一网段

如：

A:192.168.1.100 netmask:255.255.0.0

B:192.168.2.100 netmask:255.255.0.0

网络ID都为192.168.0.0

跨网络通信：路由


###VIM
```
#读取xxx文件
:r xxx

#另存
:w xxx

#执行命令
！

#将命令的结果输出到当前文档
r ! pwd
```

```
#颠倒顺序
xp
```

####总结
1. TCP三次握手、四次挥手、内核参数优化
2. TCP包头格式了解
3. IP头格式了解
4. IP计算公式，划分子网，超网
5. centos6之前版本网卡名修改